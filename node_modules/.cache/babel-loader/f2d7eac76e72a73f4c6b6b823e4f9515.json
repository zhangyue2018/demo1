{"ast":null,"code":"import _classCallCheck from \"/home/zhangyue/test/demo1/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/zhangyue/test/demo1/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/zhangyue/test/demo1/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/zhangyue/test/demo1/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/zhangyue/test/demo1/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/zhangyue/test/demo1/src/components/GalleryByReactApp.js\";\nimport React, { Component } from \"react\";\nimport { debounce } from \"lodash\";\nimport ImageSection from \"./image-section/ImageSection\";\nimport ControllerSection from \"./controller-section/ControllerSection\";\nimport styles from '../styles/main.module.scss';\nimport imageDatas from \"../data/imageDatas\";\n\nvar GalleryByReactApp =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(GalleryByReactApp, _Component);\n\n  function GalleryByReactApp() {\n    var _this;\n\n    _classCallCheck(this, GalleryByReactApp);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(GalleryByReactApp).call(this));\n\n    _this.handleClick = function (clickInfo) {\n      _this.setState({\n        clickInfo: clickInfo\n      });\n    };\n\n    _this.resize = function () {\n      _this.setState({\n        stageSize: _this.getStageSize()\n      });\n    };\n\n    _this.getStageSize = function () {\n      var stageW = _this.stage.scrollWidth,\n          stageH = _this.stage.scrollHeight,\n          halfStageW = Math.ceil(stageW / 2),\n          halfStageH = Math.ceil(stageH / 2);\n      return {\n        stageW: stageW,\n        stageH: stageH,\n        halfStageW: halfStageW,\n        halfStageH: halfStageH\n      };\n    };\n\n    _this.state = {\n      imageDatas: imageDatas || [],\n      stageSize: {\n        stageW: 0,\n        stageH: 0,\n        halfStageW: 0,\n        halfStageH: 0\n      },\n      clickInfo: {\n        name: \"noClick\",\n        //标识是居中操作还是翻转操作,属性值是center,inverse,noClick之一\n        clickIndex: 0,\n        isCenter: true,\n        isInverse: false\n      }\n    }; //防抖\n\n    _this.resize = debounce(_this.resize, 200);\n    return _this;\n  }\n\n  _createClass(GalleryByReactApp, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener(\"resize\", this.resize);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      window.addEventListener(\"resize\", this.resize);\n      var stageSize = this.getStageSize();\n      this.setState({\n        stageSize: stageSize\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          imageDatas = _this$state.imageDatas,\n          stageSize = _this$state.stageSize,\n          clickInfo = _this$state.clickInfo;\n      return React.createElement(\"section\", {\n        className: styles[\"stage\"],\n        ref: function ref(stage) {\n          return _this2.stage = stage;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, imageDatas[0] && React.createElement(ImageSection, {\n        imageDatas: imageDatas,\n        stageSize: stageSize,\n        handleClick: this.handleClick,\n        clickInfo: clickInfo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }), imageDatas[0] && React.createElement(ControllerSection, {\n        imageDatas: imageDatas,\n        handleClick: this.handleClick,\n        clickInfo: clickInfo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return GalleryByReactApp;\n}(Component);\n\nexport default GalleryByReactApp;","map":{"version":3,"sources":["/home/zhangyue/test/demo1/src/components/GalleryByReactApp.js"],"names":["React","Component","debounce","ImageSection","ControllerSection","styles","imageDatas","GalleryByReactApp","handleClick","clickInfo","setState","resize","stageSize","getStageSize","stageW","stage","scrollWidth","stageH","scrollHeight","halfStageW","Math","ceil","halfStageH","state","name","clickIndex","isCenter","isInverse","window","removeEventListener","addEventListener"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { debounce } from \"lodash\";\nimport ImageSection from \"./image-section/ImageSection\";\nimport ControllerSection from \"./controller-section/ControllerSection\";\nimport styles from '../styles/main.module.scss';\nimport imageDatas from \"../data/imageDatas\";\n\nclass GalleryByReactApp extends Component {\n  constructor() {\n    super();\n    this.state = {\n      imageDatas: imageDatas || [],\n      stageSize: {\n        stageW: 0,\n        stageH: 0,\n        halfStageW: 0,\n        halfStageH: 0\n      },\n      clickInfo: {\n        name: \"noClick\", //标识是居中操作还是翻转操作,属性值是center,inverse,noClick之一\n        clickIndex: 0,\n        isCenter: true,\n        isInverse: false\n      }\n    };\n    //防抖\n    this.resize = debounce(this.resize, 200);\n  }\n\n  handleClick = clickInfo => {\n    this.setState({\n      clickInfo\n    });\n  };\n\n  resize = () => {\n    this.setState({\n      stageSize: this.getStageSize()\n    });\n  };\n\n  //取到舞台的大小\n  getStageSize = () => {\n    let stageW = this.stage.scrollWidth,\n      stageH = this.stage.scrollHeight,\n      halfStageW = Math.ceil(stageW / 2),\n      halfStageH = Math.ceil(stageH / 2);\n\n    return {\n      stageW,\n      stageH,\n      halfStageW,\n      halfStageH\n    };\n  };\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.resize);\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"resize\", this.resize);\n\n    const stageSize = this.getStageSize();\n    this.setState({\n      stageSize\n    });\n  }\n\n  render() {\n    const { imageDatas, stageSize, clickInfo } = this.state;\n\n    return (\n      <section className={styles[\"stage\"]} ref={stage => (this.stage = stage)}>\n        {imageDatas[0] && (\n          <ImageSection\n            imageDatas={imageDatas}\n            stageSize={stageSize}\n            handleClick={this.handleClick}\n            clickInfo={clickInfo}\n          />\n        )}\n        {imageDatas[0] && (\n          <ControllerSection\n            imageDatas={imageDatas}\n            handleClick={this.handleClick}\n            clickInfo={clickInfo}\n          />\n        )}\n      </section>\n    );\n  }\n}\n\nexport default GalleryByReactApp;\n"]},"metadata":{},"sourceType":"module"}